id: 49328
name: "arch-as-code"
description: "Arch as code allows you to manage product architecture as code."
businessUnit: "DevFactory"
decisions:
  - id: "1"
    date: 2019-12-11
    title: "Build workspaces from code"
    status: Accepted
    content: "## Context\nModifying the json version of Workspace is a poor experience.\n\n## Decision\nWe will treat yml architecture data structure as the 'source' to generate and publish the Structurizr workplace 'artificat'. Structurizr Cloud Service will continue to persit state and provide a read-only view.\n\n## Consequences\nWe will not checkin any workspace json files. We will not provide 2 way sync. We will not use the revision numbers in Structurizr, rather relying on git for versioning and tagging."
  - id: "2"
    date: 2019-12-11
    title: "No two way sync"
    status: Proposed
    content: "## Context\nStructurizr is a flexible service that allows your to both pull and push product architectures.\n\n## Decision\nFor a more simplified and consistent workflow, we want information to flow in one direction-- from our source code to the structurizr api.  This will force everyone to work locally and follow a standard review process via GitHub pull requests instead publishing directly to Structurizr.\n\n## Consequence\nOur workflow will ensure that quality bars and proper reviews are met in addition to providing a more consistent, at the cost of a more restricted process.\n"

model:
  persons:
    - name: "Developer"
      description: "Developer building software"
      relationships:
        - name: "USES"
          with: "GitHub"
          description: "Raise Pull Request to update architecture"
        - name: "USES"
          with: "Structurizr Cloud Service Web Interface"
          description: "Read"
    - name: "Product Chief Architect"
      description: "Designs the software"
      relationships:
        - name: "USES"
          with: "GitHub"
          description: "Raise Pull Request to update architecture"
        - name: "USES"
          with: "GitHub"
          description: "Reviews changes to architecture"
        - name: "USES"
          with: "Structurizr Cloud Service Web Interface"
          description: "Reads"
    - name: "Technical Product Manager"
      description: "Makes Important Technical Decisions"
      relationships:
        - name: "USES"
          with: "Structurizr Cloud Service Web Interface"
          description: "Reads"
    - name: "Engineering Architect"
      description: "Make Architecture Updates"
      relationships:
        - name: "USES"
          with: "Structurizr Cloud Service Web Interface"
          description: "Reads"
        - name: "USES"
          with: "GitHub"
          description: "Raise Pull Request to update architecture"
    - name: "QA"
      description: "Test the product"
      relationships:
        - name: "USES"
          with: "Structurizr Cloud Service Web Interface"
          description: "Reads"
    - name: "VP of Engineering"
      description: "Review and understand product"
      relationships:
        - name: "USES"
          with: "Structurizr Cloud Service Web Interface"
          description: "Reads"

  systems:
    - name: "GitHub"
      description: "Hosts code and used for identity management"
      relationships:
        - name: "USES"
          with: "GitHub Actions"
          description: "Triggers continuous integration on"
    - name: "Structurizr Cloud Service Web Interface"
      description: "Web Interface managing Structurizr Workspaces"
      relationships:
        - name: "USES"
          with: "Structurizr Cloud Service API"
          description: "Reads from and writes to"
    - name: "Structurizr Cloud Service API"
      description: "API for managing Structurizr Workspaces"
    - name: "GitHub Actions"
      description: "Continuous Integration & Continuous Deployment of Architecture Artificats"
      relationships:
        - name: "USES"
          with: "Structurizr Cloud Service API"
          description: "Publishes change to"
