name: "arch-as-code"
description: "Arch as code allows you to manage product architecture as code."
businessUnit: "DevFactory"
decisions:
  - id: "1"
    date: 2019-12-11
    title: "Build workspaces from code"
    status: Accepted
    content: "## Context\nModifying the json version of Workspace is a poor experience.\n\n## Decision\nWe will treat yml architecture data structure as the 'source' to generate and publish the Structurizr workplace 'artificat'. Structurizr Cloud Service will continue to persit state and provide a read-only view.\n\n## Consequences\nWe will not checkin any workspace json files. We will not provide 2 way sync. We will not use the revision numbers in Structurizr, rather relying on git for versioning and tagging."
  - id: "2"
    date: 2019-12-11
    title: "No two way sync"
    status: Accepted
    content: "## Context\nStructurizr is a flexible service that allows your to both pull and push product architectures.\n\n## Decision\nFor a more simplified and consistent workflow, we want information to flow in one direction-- from our source code to the structurizr api.  This will force everyone to work locally and follow a standard review process via GitHub pull requests instead publishing directly to Structurizr.\n\n## Consequence\nOur workflow will ensure that quality bars and proper reviews are met in addition to providing a more consistent, at the cost of a more restricted process.\n"
  - id: "3"
    date: 2020-01-01
    title: "No cyclical dependencies"
    status: Accepted
    content: "## Context\nProposed change\n"

model:
  persons:
    - name: "Developer"
      description: "Developer building software"

    - name: "Product Chief Architect"
      description: "Designs the software"

    - name: "Technical Product Manager"
      description: "Makes Important Technical Decisions"

    - name: "Engineering Architect"
      description: "Make Architecture Updates"

    - name: "QA"
      description: "Test the product"

    - name: "VP of Engineering"
      description: "Review and understand product"

    - name: "Consultant"
      description: "ThoughtWorks"

  systems:
    - name: "GitHub"
      description: "Hosts code and used for identity management"
      containers:
        - name: "GitHub Actions"
          description: "Continuous Integration & Continuous Deployment of Architecture Artificats"

    - name: "Structurizr"
      description: "Software Architecture Visualizationa and Workspace Hosting"
      containers:
        - name: "Structurizr Cloud Service Web Interface"
          description: "Web Interface managing Structurizr Workspaces"

        - name: "Structurizr Cloud Service API"
          description: "API for managing Structurizr Workspaces"


  views:
    systemView:
      systems:
        - name: "Structurizr"
          description: "Structurizr is used for Product Architecture visualization, storage and management"
          relationships:
            - name: "Developer"
              action: "USES"
              with: "Structurizr"
              description: "Read Product Architecture"

            - name: "Product Chief Architect"
              action: "USES"
              with: "Structurizr"
              description: "Read Product Architecture"

            - name: "Technical Product Manager"
              action: "USES"
              with: "Structurizr"
              description: "Read Product Architecture"

            - name: "Engineering Architect"
              action: "USES"
              with: "Structurizr"
              description: "Read Product Architecture"

            - name: "QA"
              action: "USES"
              with: "Structurizr"
              description: "Read Product Architecture"

            - name: "VP of Engineering"
              action: "USES"
              with: "Structurizr"
              description: "Read Product Architecture"

            - name: "Consultant"
              action: "USES"
              with: "GitHub"
              description: "Read, commit and collaboration on source code"


        - name: "GitHub"
          description: "GitHub is used as a hosted version control system"
          relationships:
            - name: "Developer"
              action: "USES"
              with: "GitHub"
              description: "Read, commit and collaboration on source code"

            - name: "Product Chief Architect"
              action: "USES"
              with: "GitHub"
              description: "Read, commit and collaboration on source code"

            - name: "Engineering Architect"
              action: "USES"
              with: "GitHub"
              description: "Read, commit and collaboration on source code"

    containerView:
      containers:
        - name: "Structurizr Container"
          system: "Structurizr"
          relationships:
            - name: "Developer"
              action: "USES"
              with: "Structurizr Cloud Service Web Interface"
              description: "Read current Product Architecture"

            - name: "Engineering Architect"
              action: "USES"
              with: "Structurizr Cloud Service Web Interface"
              description: "Read and modify Product Architecture"

            - name: "Structurizr Cloud Service Web Interface"
              action: "USES"
              with: "Structurizr Cloud Service API"
              description: "To query, update and store Product Architecture"
