name: "TestSpaces"
description: "TestSpaces is a tool!"
businessUnit: "DevFactory"
decisions:
  - id: "1"
    date: 2018-11-29T16:04:32Z
    title: "Docker as the containerization technology platform"
    status: Accepted
    content: "## Context\nWe need to choose the default containerization technology that DevSpaces will support\n\n## Decision\nWe will choose Docker as the default platform\n\n## Consequences\nWe will only be able to support Linux based environments for the moment until Docker is able to support full Windows workspaces"

  - id: "2"
    date: 2019-11-19T19:07:15Z
    title: "Kubernetes as the container management platform"
    status: Accepted
    content: "## Context\nWe need an orchestration platform that will help us manage all the containers.\n\n## Decision\nKubernetes will be the container orchestration platform\n\n## Consequences."

model:
  people:
    - path: "@Developer"
      description: "Developer building software"
      tags:
        - "DevSpaces System View"
        - "Trilogy System View"
        - "DevSpaces Container View"
      relationships:
        - action: USES
          with: "c4://GitHub"
          description: "as a version control system"

        - action: USES
          with: "c4://DevSpaces"
          description: "to devolop software"

        - action: USES
          with: "c4://Trilogy Google G Suite"
          description: "inter-team collaboration"

        - action: USES
          with: "c4://DevSpaces/DevSpaces CLI"
          description: "creates and manages dev spaces"

        - action: USES
          with: "c4://DevSpaces/DevSpaces API/Sign In Controller"
          description: "log in"

    - path: "@SaasOps"
      description: "SaasOps operating system"
      tags:
        - "DevSpaces System View"
        - "Trilogy System View"
        - "DevSpaces Container View"
      relationships:
        - action: USES
          with: "c4://GitHub"
          description: "as a version control system"

        - action: USES
          with: "c4://DevSpaces"
          description: "to manage cluster"

        - action: USES
          with: "c4://Trilogy Google G Suite"
          description: "inter-team collaboration"

        - action: USES
          with: "c4://DevSpaces/DevSpaces Web Application"
          description: "to manage instances"

    - path: "@PCA"
      description: "Product Chief Architect"
      tags:
        - "Trilogy System View"
      relationships:
        - action: USES
          with: "c4://GitHub"
          description: "as a version control system"

        - action: USES
          with: "c4://XO Chat"
          description: "to communicate with team"

        - action: USES
          with: "c4://Trilogy Google G Suite"
          description: "inter-team collaboration"

    - path: "@InfoSec"
      description: "Security and system defense"

  systems:
    - path: "c4://XO Chat"
      description: "Realtime team communication"
      tags:
        - "Trilogy System View"

    - path: "c4://SalesForce"
      description: "Book keeping"
      relationships:
        - action: USES
          with: "c4://DevSpaces/DevSpaces Backend"
          description: "queries usage details to estimate monthly costs"

    - path: "c4://Trilogy Google G Suite"
      description: "Team collaboration via sheets, docs and presentations"
      tags:
        - "Trilogy System View"
      relationships:
        - action: USES
          with: "c4://DevSpaces/DevSpaces API/Sign In Controller"
          description: "SSO"

    - path: "c4://GitHub"
      description: "Hosts code and used for identity management"
      tags:
        - "DevSpaces System View"
        - "DevSpaces Container View"

    - path: "c4://DevSpaces"
      description: "allows developers to collaborate"
      tags:
        - "DevSpaces System View"

  containers:
    - path: "c4://DevSpaces/DevSpaces CLI"
      description: "Command Line Interface for interacting with DevSpaces Backend"
      technology: "C++"
      relationships:
        - action: USES
          with: "c4://DevSpaces/DevSpaces API"
          description: "to manipulate dev spaces"

        - action: DELIVERS
          with: "@SaasOps"
          description: "system-wide load monitoring reports"

    - path: "c4://DevSpaces/DevSpaces Backend"
      description: "Restful API providing capabilities for interacting with a DevSpace"
      technology: "Spring Boot"
      tags:
        - "DevSpaces Container View"
      relationships:
        - action: USES
          with: "c4://DevSpaces/DevSpaces API"
          description: "to manipulate dev spaces"

    - path: "c4://DevSpaces/DevSpaces Web Application"
      description: "Manage dev spaces"
      technology: "Angular"
      tags:
        - "DevSpaces Container View"
      relationships:
        - action: USES
          with: "c4://DevSpaces/DevSpaces Backend"
          description: "Frontend queries backend"

    - path: "c4://DevSpaces/DevSpaces API"
      description: "API to programmatically create/manage dev spaces"
      technology: "Spring Boot"
      tags:
        - "DevSpaces Container View"

  components:
    - path: "c4://DevSpaces/DevSpaces API/Sign In Controller"
      description: "Allows users to sign in"
      technology: "Spring MVC Rest Controller"
      tags:
        - "DevSpaces API Component View"
      relationships:
        - action: USES
          with: "c4://DevSpaces/DevSpaces API/Security Component"
          description: "Authorizes user"


    - path: "c4://DevSpaces/DevSpaces API/Security Component"
      description: "Provides functionality related to signing in, changing passwords, permissions, etc."
      technology: "Spring Bean"
      tags:
        - "DevSpaces API Component View"
      relationships:
        - action: DELIVERS
          with: "@InfoSec"
          description: "Delivers report on multiple failed sign-on attempts"

    - path: "c4://DevSpaces/DevSpaces API/Reset Password Controller"
      description: "Allows users to reset their passwords"
      technology: "Spring MVC Rest Controller"
      tags:
        - "DevSpaces API Component View"
      relationships:
        - action: USES
          with: "c4://DevSpaces/DevSpaces API/Security Component"
          description: "Authorizes user"

        - action: USES
          with: "c4://DevSpaces/DevSpaces API/E-mail Component"
          description: "sends new password"

    - path: "c4://DevSpaces/DevSpaces API/E-mail Component"
      description: "Sends emails to users"
      technology: "Spring MVC Rest Controller"
      tags:
        - "DevSpaces API Component View"

  views:
    systemViews:
      - name: "DevSpaces"
        systemPath: "c4://DevSpaces"
        description: "Internal Trilogy users view of DevSpaces system"
        tags:
          - "DevSpaces System View"
        entities:
          - path: "@Developer"
          - path: "@PCA"
          - path: "c4://GitHub"
          - path: "c4://Trilogy Google G Suite"
          - path: "c4://SalesForce"

      - name: "Trilogy Google G Suite"
        systemPath: "c4://Trilogy Google G Suite"
        description: "Trilogy inter-team communication"
        tags:
          - "Trilogy System View"

    containerViews:
      - name: "DevSpaces API Container"
        systemPath: "c4://DevSpaces"
        description: "DevSpaces Container"
        tags:
          - "DevSpaces Container View"

    componentViews:
      - name: "DevSpaces API Components"
        containerPath: "c4://DevSpaces/DevSpaces API"
        description: "DevSpaces API Components"
        tags:
          - "DevSpaces API Component View"
